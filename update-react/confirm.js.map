{"version":3,"sources":["confirm.jsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAI,OAAO,SAAS,cAAT,CAAwB,MAAxB,CAAX;;;;;AAGI,uBAAqB;AAAA;;AAAA;;AAAA,0CAAN,IAAM;AAAN,gBAAM;AAAA;;AAAA,4IACR,IADQ;AAEpB;;;;6CAEoB;AACjB,iBAAK,KAAL,GAAa;AACT,uBAAO,EADE;AAET,yBAAS,EAFA;AAGT,yBAAS,EAHA;AAIT,sBAAM,EAJG;AAKT,uBAAO,EALE;AAMT,0BAAU,EAND;AAOT,uBAAO,EAPE;AAQT,uBAAO,EARE;AAST,0BAAU,EATD;AAUT,yBAAS,KAVA;AAWT,qBAAK;AAXI,aAAb;AAaH;;;4CAEmB;AAChB,gBAAI,SAAS,OAAO,QAAP,CAAgB,MAAhB,CAAuB,KAAvB,CAA6B,CAA7B,EAAgC,KAAhC,CAAsC,GAAtC,CAAb;AACA,iBAAK,QAAL,CAAc;AACV,uBAAO,UAAU,OAAO,CAAP,EAAU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV,CADG;AAEV,yBAAS,KAAK,KAAL,CAAW,UAAU,OAAO,CAAP,EAAU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV,CAAX,CAFC;AAGV,yBAAS,UAAU,OAAO,CAAP,EAAU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV,CAHC;AAIV,sBAAM,KAAK,KAAL,CAAW,UAAU,OAAO,CAAP,EAAU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV,CAAX,CAJI;AAKV,uBAAO,KAAK,KAAL,CAAW,UAAU,OAAO,CAAP,EAAU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV,CAAX,CALG;AAMV,uBAAO,KAAK,KAAL,CAAW,UAAU,OAAO,CAAP,EAAU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV,CAAX;AANG,aAAd;AAQA,gBAAI,QAAQ,IAAZ;AACA,cAAE,IAAF,CAAO;AACH,qBAAK,qBADF;AAEH,sBAAM,KAFH;AAGH,yBAAS,iBAAU,IAAV,EAAgB;AACrB,0BAAM,QAAN,CAAe;AACX,+BAAO,KAAK,KADD;AAEX,kCAAU,KAAK;AAFJ,qBAAf,EAGG,YAAY;AACX,0BAAE,GAAF,CAAM,sBAAN,EAA8B,MAAM,KAAN,CAAY,QAA1C,EAAoD,UAAU,IAAV,EAAgB;AAChE,kCAAM,QAAN,CAAe,EAAC,UAAU,KAAK,KAAhB,EAAf;AACH,yBAFD;AAGH,qBAPD;AAQH;AAZE,aAAP;AAcH;;;kCAES,C,EAAG;AACT,iBAAK,QAAL,CAAc;AACV,0BAAU,EAAE,MAAF,CAAS;AADT,aAAd;AAGH;;;kCAES;AACN,gBAAI,QAAQ,IAAZ;AACA,kBAAM,QAAN,CAAe,EAAC,SAAS,IAAV,EAAf;AACA;AACA;AACA,gBAAI,QAAQ;AACR,yBAAS,KAAK,KAAL,CAAW,OADZ;AAER,uBAAO,KAAK,KAAL,CAAW,KAFV;AAGR,uBAAO,KAAK,KAAL,CAAW,KAHV;AAIR,uBAAO,KAAK,SAAL,CAAe,KAAK,KAAL,CAAW,KAA1B;AAJC,aAAZ;AAMA,gBAAI,QAAQ;AACR,0BAAU,KAAK,KAAL,CAAW,QADb;AAER,uBAAO,KAAK,KAAL,CAAW;AAFV,aAAZ;AAIA,gBAAI,OAAJ;AACA,gBAAI,WAAW,EAAf;AACA,qBAAS,CAAT,IAAc,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAoB;AAC1C,kBAAE,GAAF,CAAM,wBAAN,EAAgC,KAAhC,EAAuC,UAAU,MAAV,EAAkB;AACrD,2BAAO,IAAP,IAAe,KAAf,GAAuB,SAAvB,GAAmC,QAAnC;AACH,iBAFD;AAGH,aAJa,CAAd;AAKA,qBAAS,CAAT,IAAc,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAoB;AAC1C,kBAAE,IAAF,CAAO,kBAAP,EAA2B,KAA3B,EAAkC,UAAU,MAAV,EAAkB;AAChD,wBAAI,OAAO,UAAP,IAAqB,GAAzB,EAA8B;AAC1B,kCAAU,OAAO,OAAjB;AACA;AACH,qBAHD,MAGO;AACH;AACH;AACJ,iBAPD;AAQH,aATa,CAAd;;AAWA,oBAAQ,GAAR,CAAY,QAAZ,EAAsB,IAAtB,CAA2B,YAAY;AACnC,uBAAO,QAAP,CAAgB,IAAhB,GAAuB,uBAAuB,OAA9C;AACH,aAFD,EAEG,KAFH,CAES,YAAY;AACb,sBAAM,QAAN,CAAe,EAAC,SAAS,KAAV,EAAiB,KAAK,SAAtB,EAAf;AACH,aAJL;AAOH;;;qCAEY;AACT,iBAAK,QAAL,CAAc,EAAC,UAAU,EAAX,EAAd;AACH;;;mCAEU;AACP,iBAAK,QAAL,CAAc,EAAC,KAAK,EAAN,EAAd;AACH;;;iCAEQ;AAAA;;AACL,mBAAQ;AAAA;AAAA,kBAAK,WAAU,WAAf,EAA2B,IAAG,WAA9B;AACA,kEAAQ,IAAI,MAAZ,EAAoB,SAAS,SAA7B,GADA;AAEA;AAAA;AAAA,sBAAK,WAAU,2BAAf,EAA2C,OAAO,EAAC,SAAS,YAAV,EAAwB,iBAAiB,SAAzC,EAAlD;AACI;AAAA;AAAA,0BAAG,WAAU,YAAb;AACI;AAAA;AAAA,8BAAO,WAAU,kBAAjB,EAAoC,OAAO,EAAC,YAAY,QAAb,EAA3C;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA,8BAAM,WAAU,kBAAhB,EAAmC,OAAO,EAAC,UAAS,OAAV,EAA1C;AAA+D,iCAAK,KAAL,CAAW;AAA1E;AAFJ,qBADJ;AAKI,0DAAI,kBAAe,SAAnB,EAA6B,WAAU,+BAAvC,EAAuE,OAAO,EAAC,WAAW,CAAZ,EAA9E,GALJ;AAMI;AAAA;AAAA,0BAAG,WAAU,YAAb;AACI;AAAA;AAAA,8BAAO,WAAU,kBAAjB,EAAoC,OAAO,EAAC,QAAQ,MAAT,EAAiB,YAAY,QAA7B,EAA3C;AAAA;AAAA,yBADJ;AAEK,6BAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,IAA6B,CAA7B,GAAiC,EAAjC,GAAsC,KAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,CAAuB,UAAC,KAAD,EAAQ,CAAR;AAAA,mCAC1D;AAAA;AAAA,kCAAM,OAAO,EAAC,UAAS,OAAV,EAAb,EAAiC,KAAK,CAAtC,EAAyC,WAAU,kBAAnD;AAAuE;AAAvE,6BAD0D;AAAA,yBAAvB;AAF3C,qBANJ;AAWI,0DAAI,kBAAe,SAAnB,EAA6B,WAAU,+BAAvC,EAAuE,OAAO,EAAC,WAAW,CAAZ,EAA9E,GAXJ;AAYI;AAAA;AAAA,0BAAG,WAAU,YAAb;AACI;AAAA;AAAA,8BAAO,WAAU,kBAAjB,EAAoC,OAAO,EAAC,YAAY,QAAb,EAA3C;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA,8BAAM,WAAU,kBAAhB,EAAmC,OAAO,EAAC,UAAS,OAAV,EAA1C;AAA+D,iCAAK,KAAL,CAAW;AAA1E;AAFJ;AAZJ,iBAFA;AAmBA;AAAA;AAAA,sBAAK,WAAU,kBAAf;AACK,+BAAO,EAAC,WAAW,MAAZ,EAAoB,SAAS,YAA7B,EAA2C,iBAAiB,MAA5D,EADZ;AAEI;AAAA;AAAA,0BAAG,WAAU,YAAb;AACI;AAAA;AAAA,8BAAO,WAAU,kBAAjB,EAAoC,OAAO,EAAC,YAAY,QAAb,EAA3C;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA,8BAAM,WAAU,qBAAhB;AACA,qEAAO,KAAI,QAAX,EAAoB,UAAU,kBAAC,CAAD,EAAM;AAChC,2CAAK,SAAL,CAAe,CAAf;AACH,iCAFD,EAEG,OAAO,KAAK,KAAL,CAAW,QAFrB,EAE+B,IAAG,WAFlC,EAE8C,MAAK,QAFnD;AAGO,uCAAO,EAAC,UAAS,OAAV,EAAkB,OAAO,KAAzB,EAAgC,SAAS,MAAzC,EAAiD,QAAQ,MAAzD,EAHd,EAGgF,aAAY,sCAH5F,GADA;AAKjB,iEAAG,SAAS,mBAAK;AACJ,2CAAK,UAAL;AACH,iCAFV,EAEY,WAAU,gCAFtB;AALiB;AAFJ;AAFJ,iBAnBA;AAkCA,gEAAM,KAAK,KAAK,KAAL,CAAW,GAAtB,EAA2B,UAAU,oBAAK;AACtC,+BAAK,QAAL;AACH,qBAFD,GAlCA;AAqCA;AAAA;AAAA,sBAAK,OAAO;AACR,qCAAS,KAAK,KAAL,CAAW,OAAX,GAAqB,OAArB,GAA+B,MADhC;AAER,oCAAQ,KAFA;AAGR,uCAAW,QAHH;AAIR,sCAAU,OAJF;AAKR,iCAAK,GALG;AAMR,sCAAU,GANF;AAOR,mCAAO,MAPC;AAQR,6CAAiB,SART;AASR,qCAAS;AATD,yBAAZ;AAWI,oEAAM,OAAO,EAAC,UAAU,UAAX,EAAuB,KAAK,KAA5B,EAAkC,YAAW,UAA7C,EAAwD,WAAU,OAAlE,EAAb,EAAyF,KAAI,YAA7F,EAA0G,MAAK,OAA/G;AACM,kCAAU,KAAK,KAAL,CAAW,OAD3B;AAXJ,iBArCA;AAmDA;AAAA;AAAA,sBAAK,WAAU,+BAAf;AACI;AAAA;AAAA,0BAAG,WAAU,IAAb;AAAA;AAAqB;AAAA;AAAA,8BAAI,WAAU,eAAd;AAA+B,kCAAM,KAAK,KAAL,CAAW;AAAhD;AAArB,qBADJ;AAEI;AAAA;AAAA,0BAAQ,MAAK,QAAb,EAAsB,SAAS,mBAAK;AAChC,uCAAK,OAAL;AACH,6BAFD,EAEG,WAAU,mCAFb;AAAA;AAAA;AAFJ;AAnDA,aAAR;AA4DH;;;;EArKiB,gBAAM,S;;AAwK5B,mBAAS,MAAT,CAAgB,8BAAC,OAAD,OAAhB,EAA4B,IAA5B","file":"confirm.js","sourcesContent":["import React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport Header from \"./gymResource/header\";\r\nimport {Spin} from \"antd\";\r\nimport Warn from \"./gymResource/warn\";\r\nvar main = document.getElementById(\"main\")\r\n\r\nclass Confirm extends React.Component {\r\n    constructor(...prop) {\r\n        super(...prop)\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.state = {\r\n            gymId: \"\",\r\n            content: [],\r\n            gymname: \"\",\r\n            time: \"\",\r\n            total: \"\",\r\n            phoneNum: \"\",\r\n            title: \"\",\r\n            arrId: [],\r\n            wxopenId: \"\",\r\n            loading: false,\r\n            msg: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        var mation = window.location.search.slice(1).split(\"&\");\r\n        this.setState({\r\n            gymId: decodeURI(mation[0].split(\"=\")[1]),\r\n            content: JSON.parse(decodeURI(mation[5].split(\"=\")[1])),\r\n            gymname: decodeURI(mation[1].split(\"=\")[1]),\r\n            time: JSON.parse(decodeURI(mation[6].split(\"=\")[1])),\r\n            total: JSON.parse(decodeURI(mation[2].split(\"=\")[1])),\r\n            arrId: JSON.parse(decodeURI(mation[4].split(\"=\")[1]))\r\n        })\r\n        var _this = this;\r\n        $.ajax({\r\n            url: \"/sport/confirmOrder\",\r\n            type: \"get\",\r\n            success: function (data) {\r\n                _this.setState({\r\n                    title: data.title,\r\n                    wxopenId: data.wxopenId\r\n                }, function () {\r\n                    $.get(\"/sport/clm/userphone\", _this.state.wxopenId, function (data) {\r\n                        _this.setState({phoneNum: data.phone})\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    changeNum(e) {\r\n        this.setState({\r\n            phoneNum: e.target.value\r\n        })\r\n    }\r\n\r\n    orderOK() {\r\n        var _this = this;\r\n        _this.setState({loading: true})\r\n        //创建订单成功才能提交，微信openId，订单id，手机号验证\r\n        //  Promise.all().then().catch\r\n        var data1 = {\r\n            gymname: this.state.gymname,\r\n            total: this.state.total,\r\n            gymid: this.state.gymId,\r\n            arrid: JSON.stringify(this.state.arrId)\r\n        }\r\n        var data2 = {\r\n            wxopenId: this.state.wxopenId,\r\n            phone: this.state.phoneNum\r\n        }\r\n        var orderNo;\r\n        var promises = [];\r\n        promises[0] = new Promise((resolve, reject)=> {\r\n            $.get(\"/sport/clm/updatephone\", data2, function (result) {\r\n                result.code == \"200\" ? resolve() : reject()\r\n            })\r\n        });\r\n        promises[1] = new Promise((resolve, reject)=> {\r\n            $.post(\"/sport/order/add\", data1, function (result) {\r\n                if (result.resultCode == \"0\") {\r\n                    orderNo = result.orderNo;\r\n                    resolve()\r\n                } else {\r\n                    reject()\r\n                }\r\n            })\r\n        });\r\n\r\n        Promise.all(promises).then(function () {\r\n            window.location.href = \"/orderPay?orderNo=\" + orderNo\r\n        }).catch(function () {\r\n                _this.setState({loading: false, msg: \"创建订单不成功\"})\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    clearPhone() {\r\n        this.setState({phoneNum: \"\"})\r\n    }\r\n\r\n    clearMsg() {\r\n        this.setState({msg: \"\"})\r\n    }\r\n\r\n    render() {\r\n        return (<div className=\"container\" id=\"container\">\r\n                <Header h1={\"确认订单\"} bgcolor={\"#000000\"}/>\r\n                <div className=\"Order am-u-sm-12 clearfix\" style={{padding: \"2rem 0 0 0\", backgroundColor: \"#ffffff\"}}>\r\n                    <p className=\"am-u-sm-12\">\r\n                        <label className=\"am-u-sm-4 ColorB\" style={{fontWeight: \"normal\"}}>场馆名称：</label>\r\n                        <span className=\"am-u-sm-8 ColorA\" style={{fontSize:\"1.4em\"}}>{this.state.gymname}</span>\r\n                    </p>\r\n                    <hr data-am-widget=\"divider\" className=\"am-divider am-divider-default\" style={{marginTop: 0}}/>\r\n                    <p className=\"am-u-sm-12\">\r\n                        <label className=\"am-u-sm-4 ColorB\" style={{height: \"70px\", fontWeight: \"normal\"}}>场地明细：</label>\r\n                        {this.state.content.length == 0 ? \"\" : this.state.content.map((index, i)=>(\r\n                            <span style={{fontSize:\"1.4em\"}} key={i} className=\"am-u-sm-8 ColorA\">{index}</span>))}\r\n                    </p>\r\n                    <hr data-am-widget=\"divider\" className=\"am-divider am-divider-default\" style={{marginTop: 0}}/>\r\n                    <p className=\"am-u-sm-12\">\r\n                        <label className=\"am-u-sm-4 ColorB\" style={{fontWeight: \"normal\"}}>日期：</label>\r\n                        <span className=\"am-u-sm-8 ColorA\" style={{fontSize:\"1.4em\"}}>{this.state.time}</span>\r\n                    </p>\r\n                </div>\r\n                <div className=\"Order am-u-sm-12\"\r\n                     style={{marginTop: \"20px\", padding: \"1rem 0 0 0\", backgroundColor: \"#fff\"}}>\r\n                    <p className=\"am-u-sm-12\">\r\n                        <label className=\"am-u-sm-4 ColorB\" style={{fontWeight: \"normal\"}}>手机号：</label>\r\n                        <span className=\"am-u-sm-8 ColorA PR\">\r\n                        <input ref=\"telNum\" onChange={(e)=> {\r\n                            this.changeNum(e)\r\n                        }} value={this.state.phoneNum} id=\"userphone\" type=\"number\"\r\n                               style={{fontSize:\"1.4em\",width: \"85%\", outline: \"none\", border: \"none\"}} placeholder=\"输入电话号码\"/>\r\n    \t\t\t<i onClick={()=> {\r\n                    this.clearPhone()\r\n                }} className=\"fr am-icon-times-circle ColorC\"></i>\r\n    \t\t\t</span>\r\n                    </p>\r\n                </div>\r\n                <Warn msg={this.state.msg} clearMsg={()=> {\r\n                    this.clearMsg()\r\n                }}/>\r\n                <div style={{\r\n                    display: this.state.loading ? \"block\" : \"none\",\r\n                    zIndex: \"100\",\r\n                    textAlign: \"center\",\r\n                    position: \"fixed\",\r\n                    top: \"0\",\r\n                    \"bottom\": \"0\",\r\n                    width: \"100%\",\r\n                    backgroundColor: \"#000000\",\r\n                    opacity: \"0.6\"\r\n                }}>\r\n                    <Spin style={{position: \"absolute\", top: \"50%\",marginLeft:\"-25.21px\",marginTop:\"-25px\"}} tip=\"Loading...\" size=\"large\"\r\n                          spinning={this.state.loading}/>\r\n                </div>\r\n                <div className=\"am-u-sm-12 botSubmit clearfix\">\r\n                    <p className=\"fl\">合计：<em className=\"ColorO priceB\">{\"￥\" + this.state.total}</em></p>\r\n                    <button type=\"button\" onClick={()=> {\r\n                        this.orderOK()\r\n                    }} className=\"fr am-btn am-radius am-btn-orange\">提交订单\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDom.render(<Confirm/>, main)"]}